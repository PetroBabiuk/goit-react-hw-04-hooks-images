(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{20:function(e,t,n){},21:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(4),o=n.n(r),s=(n(17),n(18),n(19),n(20),n(3)),i=n(7),u=(n(21),n(1)),j=function(e){var t=e.onSubmit,n=Object(c.useState)(""),a=Object(s.a)(n,2),r=a[0],o=a[1];return Object(u.jsx)("header",{className:"Searchbar",children:Object(u.jsxs)("form",{className:"SearchForm",onSubmit:function(e){if(e.preventDefault(),""===r.trim())return i.b.error("Please do not use empty string, you have to write something");t(r),o("")},children:[Object(u.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(u.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(u.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:r,onChange:function(e){o(e.currentTarget.value)}})]})})},l=n(8),b=n(10),h=n.n(b),m=function(e){var t=e.onClick;return Object(u.jsx)("button",{className:"Button",onClick:t,children:"Load more"})},d=function(e){var t=e.images,n=e.onClick;return t.map((function(e){return Object(u.jsx)("li",{className:"ImageGalleryItem",children:Object(u.jsx)("img",{onClick:function(){return n(e)},src:e.webformatURL,alt:e.tags,className:"ImageGalleryItem-image"})},e.id)}))},O=n(11),f=n.n(O),g=n(12);function p(e,t){return x.apply(this,arguments)}function x(){return(x=Object(g.a)(f.a.mark((function e(t,n){var c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://pixabay.com/api/?q=".concat(t,"&page=").concat(n,"&key=22394687-5b263f11c9e1c3bf9700990e1&image_type=photo&orientation=horizontal&per_page=12"));case 2:if(!(c=e.sent).ok){e.next=5;break}return e.abrupt("return",c.json());case 5:return e.next=7,Promise.reject(new Error("Sorry, but something was wrong,"));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=function(e){var t=e.query,n=e.onClick,a=Object(c.useState)([]),r=Object(s.a)(a,2),o=r[0],i=r[1],j=Object(c.useState)(null),b=Object(s.a)(j,2),O=b[0],f=b[1],g=Object(c.useState)(0),x=Object(s.a)(g,2),v=x[0],S=x[1],w=Object(c.useState)(1),y=Object(s.a)(w,2),k=y[0],C=y[1],N=Object(c.useState)("idle"),I=Object(s.a)(N,2),E=I[0],F=I[1],T=Object(c.useState)(""),q=Object(s.a)(T,2),G=q[0],L=q[1],P=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})};return Object(c.useEffect)((function(){t&&(C(1),i([]),F("pending"),p(t,1).then((function(e){if(0===e.totalHits)throw new Error("Nothing with name ".concat(t," was not found"));L(t),i(Object(l.a)(e.hits)),F("resolved"),S(e.totalHits/12)})).catch((function(e){f(e),F("rejected")})),P())}),[t]),Object(c.useEffect)((function(){k>1&&t===G&&(F("another-pending"),p(t,k).then((function(e){i((function(t){return[].concat(Object(l.a)(t),Object(l.a)(e.hits))})),F("resolved")})).catch((function(e){f(e),F("rejected")})),P())}),[k,t,G]),"idle"===E?Object(u.jsx)("h1",{children:"Please, enter something"}):"pending"===E?Object(u.jsx)(h.a,{type:"ThreeDots",color:"#3f51b5",height:280,width:280}):"another-pending"===E?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("ul",{className:"ImageGallery",children:Object(u.jsx)(d,{images:o,onClick:n})}),Object(u.jsx)(h.a,{type:"ThreeDots",color:"#3f51b5",height:280,width:280})]}):"rejected"===E?Object(u.jsx)("h1",{children:O.message}):"resolved"===E?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("ul",{className:"ImageGallery",children:Object(u.jsx)(d,{images:o,onClick:n})}),v>=k?Object(u.jsx)(m,{onClick:function(){return C((function(e){return e+1}))}}):Object(u.jsx)(u.Fragment,{})]}):void 0},S=document.querySelector("#modal-root"),w=function(e){var t=e.modalImage,n=e.onClose;Object(c.useEffect)((function(){window.addEventListener("keydown",(function(e){"Escape"===e.code&&n()}))}),[n]);return Object(r.createPortal)(Object(u.jsx)("div",{className:"Overlay",onClick:function(e){e.currentTarget===e.target&&n()},children:Object(u.jsx)("div",{className:"Modal",children:Object(u.jsx)("img",{src:t.largeImageURL,alt:t.tags})})}),S)},y=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),o=Object(s.a)(r,2),l=o[0],b=o[1],h=Object(c.useState)(""),m=Object(s.a)(h,2),d=m[0],O=m[1];return Object(u.jsxs)("div",{children:[l&&Object(u.jsx)(w,{modalImage:d,onClose:function(){b(!1)}}),Object(u.jsx)(j,{onSubmit:function(e){a(e)}}),Object(u.jsx)(v,{query:n,onClick:function(e){b(!0),O(e)}}),Object(u.jsx)(i.a,{})]})};o.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(y,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.7d133ddb.chunk.js.map